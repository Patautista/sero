@using System.Globalization
@using CommunityToolkit.Maui.Alerts
@using MauiApp1.Services.Audio
@inject ApiService ApiService
@inject MauiSoundService SoundService
@inject ISettingsService SettingsService

@code{
    protected string Translate(string text, string lang = "pt")
    {
        return ApiService.GetNativeTranslationAsync(text, lang).Result;
    }
    protected async Task PlayVoiceClip(string text, string lang)
    {

        var res = await SoundService.PlayVoiceClip(text, lang);
        if (res)
        {
            var toast = Toast.Make("Reproduzindo áudio.", CommunityToolkit.Maui.Core.ToastDuration.Short, 14);
            await toast.Show(CancellationToken.None);
        }
        else
        {
            var toast = Toast.Make("Falha ao reproduzir áudio.", CommunityToolkit.Maui.Core.ToastDuration.Short, 14);
            await toast.Show(CancellationToken.None);
        }
    }
    protected CultureInfo Nativelanguage => SettingsService?.StudyConfig?.Value?.SelectedLanguage?.Source;
    protected string NativelanguageCode => Nativelanguage.TwoLetterISOLanguageName;
    protected CultureInfo TargetLanguage => SettingsService?.StudyConfig?.Value?.SelectedLanguage?.Target;
    protected string TargetLanguageCode => TargetLanguage.TwoLetterISOLanguageName;
}