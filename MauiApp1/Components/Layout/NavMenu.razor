<div class="top-bar bg-white shadow-sm px-4 py-2 sticky top-0 z-50 lg:hidden flex justify-between items-center">
    <a class="navbar-brand text-indigo-700 text-xl font-bold" href="">Triolingo</a>
    <button class="hamburger-button focus:outline-none" @onclick="ToggleNavMenu">
        <span class="block bg-indigo-700 h-1 w-6 my-1 rounded-full transition-transform duration-300 ease-in-out" style="@(isNavOpen ? "transform: rotate(45deg) translate(5px, 5px);" : "")"></span>
        <span class="block bg-indigo-700 h-1 w-6 my-1 rounded-full transition-transform duration-300 ease-in-out" style="@(isNavOpen ? "opacity: 0;" : "")"></span>
        <span class="block bg-indigo-700 h-1 w-6 my-1 rounded-full transition-transform duration-300 ease-in-out" style="@(isNavOpen ? "transform: rotate(-45deg) translate(5px, -5px);" : "")"></span>
    </button>
</div>

<div class="@(isNavOpen ? "nav-menu-container-open" : "nav-menu-container-closed")
            flex-col transition-all duration-300 ease-in-out
            fixed inset-0 bg-white z-40
            lg:relative lg:flex-row lg:items-center lg:justify-start lg:py-0 lg:px-4 lg:bg-transparent">
    
    <div class="lg:hidden flex items-center justify-between p-4 border-b border-gray-200">
        <h2 class="text-2xl font-bold text-indigo-700">Menu</h2>
        <button class="text-3xl text-gray-500 cursor-pointer" @onclick="ToggleNavMenu">
            &times;
        </button>
    </div>

    <nav class="flex-column lg:flex-row">
        <div class="nav-item px-3 py-2">
            <NavLink class="nav-link text-lg font-medium text-gray-700 hover:bg-indigo-100 rounded-lg px-4 py-2 transition-colors duration-200"
                     href="@Routes.SessionSelect" Match="NavLinkMatch.All">
                <span class="bi bi-card-text-nav-menu" aria-hidden="true"></span> Home
            </NavLink>
        </div>
        <div class="nav-item px-3 py-2">
            <NavLink class="nav-link text-lg font-medium text-gray-700 hover:bg-indigo-100 rounded-lg px-4 py-2 transition-colors duration-200"
                     href="@Routes.CreateCard" Match="NavLinkMatch.All">
                <span class="bi bi-card-text-nav-menu" aria-hidden="true"></span> Criar card
            </NavLink>
        </div>
        <div class="nav-item px-3 py-2">
            <NavLink class="nav-link text-lg font-medium text-gray-700 hover:bg-indigo-100 rounded-lg px-4 py-2 transition-colors duration-200"
                     href="@Routes.Dashboard" Match="NavLinkMatch.All">
                <span class="bi bi-gear-fill-nav-menu" aria-hidden="true"></span> Estatísticas
            </NavLink>
        </div>
        <div class="nav-item px-3 py-2">
            <NavLink class="nav-link text-lg font-medium text-gray-700 hover:bg-indigo-100 rounded-lg px-4 py-2 transition-colors duration-200"
                     href="@Routes.DecksView" Match="NavLinkMatch.All">
                <span class="bi bi-collection-nav-menu" aria-hidden="true"></span> Visualizar Decks
            </NavLink>
        </div>
        <div class="nav-item px-3 py-2">
            <NavLink class="nav-link text-lg font-medium text-gray-700 hover:bg-indigo-100 rounded-lg px-4 py-2 transition-colors duration-200"
                     href="@Routes.Settings" Match="NavLinkMatch.All">
                <span class="bi bi-gear-fill-nav-menu" aria-hidden="true"></span> Configuração
            </NavLink>
        </div>
    </nav>
</div>

@code {
    private bool isNavOpen = false;

    private void ToggleNavMenu()
    {
        isNavOpen = !isNavOpen;
    }

}

<style>
    /* Mobile styles for the hamburger menu */
    .nav-menu-container-closed {
        transform: translateX(-100%);
    }

    .nav-menu-container-open {
        transform: translateX(0);
    }
    
    .nav-link.active {
        background-color: #e0e7ff; /* Tailwind's indigo-100 */
        color: #4f46e5; /* Tailwind's indigo-600 */
    }

    /* Desktop styles */
    @@media (min-width: 1024px) {
        .top-bar {
            display: none;
        }
        
        .nav-menu-container-closed, .nav-menu-container-open {
            display: flex;
            position: relative;
            transform: none;
            background-color: transparent;
        }

        .nav-menu-container-closed nav, .nav-menu-container-open nav {
            flex-direction: row;
        }
    }
</style>
